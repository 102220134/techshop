# ==========================================
# Common Application Settings
# ==========================================
spring.application.name=pbl6

server.address=0.0.0.0
server.port=${SERVER_PORT:8080}

spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:5MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:10MB}

spring.jackson.time-zone=${TIME_ZONE:GMT+7}

# ==========================================
# Database Configuration
# ==========================================
# Khi ch?y Docker: ??c ENV DATABASE_URL, DATABASE_USERNAME, DATABASE_PASSWORD
# Khi ch?y IDE: fallback v? Aiven database (m?c ??nh)
spring.datasource.url=${DATABASE_URL:jdbc:mysql://techshop-anhvukupj-efaf.d.aivencloud.com:27168/techshop?ssl-mode=VERIFY_CA&serverTimezone=UTC}
spring.datasource.username=${DATABASE_USERNAME:avnadmin}
spring.datasource.password=${DATABASE_PASSWORD:AVNS_XGyWCNGvxHFitfToc7g}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# SSL (ch? dùng n?u database có yêu c?u)
spring.datasource.hikari.data-source-properties.sslCa=${SSL_CA_PATH:classpath:ca.pem}

# ==========================================
# Connection Pool Configuration
# ==========================================
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}

# ==========================================
# Hibernate / JPA
# ==========================================
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:none}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true

# ==========================================
# JWT Configuration
# ==========================================
jwt.secret=${JWT_SECRET:mqQMwkzietbK/iXc6kmsuDX6HVwtXtXt6tQK77WxUA2jA2YsjR5YZNDPu+1ukcPB}
jwt.expiration.access=${JWT_ACCESS_EXPIRATION:1800}
jwt.expiration.refresh=${JWT_REFRESH_EXPIRATION:3600}

# ==========================================
# App Defaults
# ==========================================
default_root_category=${DEFAULT_ROOT_CATEGORY:default-category}

# ==========================================
# Logging
# ==========================================
logging.level.com.pbl6=${LOG_LEVEL_APP:INFO}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:WARN}
logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL:WARN}
